<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Greenbelt Step Club, Inc</title>
    <meta name="description" content="">
     <!-- Tell browser that the website is optimized for the phone -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"/>
    <link type="text/css" rel="stylesheet" href="css/custom.css"/>
    
     <!-- Material Icons -->
     <link href="css/local-gstatic.css" rel="stylesheet">
  </head>

  <body class="white">
    <nav class="navbar">
        <div class="nav-wrapper green darken-3">
            <a href="#" class="brand-logo center" id="navbar-title">Greenbelt Step Club</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
              <li class="active"><a href="index.html">Home</a></li>
              <li class=""><a href="index.html">About</a></li>
              <li class=""><a href="index.html">Contact</a></li>
          </ul>
            <!-- this makes the navbar slide out for the phone -->
          <a href="#" data-target="slide-out" class="sidenav-trigger button-collapse right"><i class="material-icons black-text">menu</i></a>
        </div>
      </nav>
    
       <!-- this will appear on the phone navbar -->
      <ul id="slide-out" class="sidenav">
        <li class="active"><a href="index.html">Home</a></li>
        <li class=""><a href="index.html">About</a></li>
        <li class=""><a href="index.html">Contact</a></li>
      </ul>
    
      <main class="white">
    
       <div class="section">
        <table class="" style="width:100vw;">
          <tr>
            <td>            
              <!-- https://materializecss.com/dropdown.html-->
              <a class="dropdown-trigger btn light-blue darken-4" href="#" data-target="dd_day">Day</a>
              <ul id="dd_day" class="dropdown-content">
                <li class="active"><a href="#!">All</a></li>
                <li><a href="#!">Monday</a></li>
                <li><a href="#!">Tuesday</a></li>
                <li><a href="#!">Wednesday</a></li>
                <li><a href="#!">Thursday</a></li>
                <li><a href="#!">Friday</a></li>
                <li><a href="#!">Saturday</a></li>
                <li><a href="#!">Sunday</a></li>
              </ul>
            </td>
            <td>Time</td> 
            <td>
              <!-- https://materializecss.com/dropdown.html-->
              <a class="dropdown-trigger btn light-blue darken-4" href="#" data-target="dd_fellowship">Type</a>
              <ul id="dd_fellowship" class="dropdown-content">
              <li class="active"><a href="#!">All</a></li>
              <li><a href="#!">AA</a></li>
              <li><a href="#!">NA</a></li>
              </ul>
            </td> 
            <td>Format</td>
            <td>Closed Meeting?</td>  
          </tr>

          <tbody id="meeting-schedule">
            
          </tbody>
        </table>
        </div>
    
      </main>
    
      <footer class="page-footer  green darken-3">
        <div class="container">
          <div class="row">
            <div class="col l6 s12">
              <h5 class="white-text"></h5>
              <p class="grey-text text-lighten-4"></p>
            </div>
            <div class="col l4 offset-l2 s12">
              <ul>
                <li><a href="index.html" class="white-text"></a></li>
                <li><a href="index.html" class="white-text"></a></li>
                <li><a href="index.html" class="white-text"></a></li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
   
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript">


// it is too much trouble to  manually create html tables. just define them in javascript and let jquery code for you
class Day {
    constructor(name, list) {
        this.name = name; // it is too much trouble to manually type the day each time a Meeting class is created. add it once here. 
        this.list = list;
    }
}

class Meeting {
    constructor(time, fellowShip, format, isClosed) {
        this.time = time;
        this.fellowShip = fellowShip;
        this.format = format;
        this.isClosed = isClosed;
    }
}

// warning: the fellow ship type (AA, NA, ect) must be the same here as it is in the dropdown bar in the table header. the javascript is doing string comparisons.
// be sure to use a variable rather than re-typing "AA" or the like when initializing Day classes. That way if something is wrong you only have to check two places. 
let FELLOWSHIP_AA = "AA";
let FELLOWSHIP_NA = "NA";

let monday = new Day("Monday", [
    new Meeting("6:45 AM", FELLOWSHIP_AA, "Slogans", "Yes"),
    new Meeting("12:00 PM", FELLOWSHIP_AA, "Big Book", "Yes"),
]);

let tuesday = new Day("Tuesday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "Tools of Recovery", "Yes"),
]);

let wednesday = new Day("Wednesday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "Big Book", "Yes"),
]);

let thursday = new Day("Thursday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "Steps & Traditions", "Yes"),
]);

let friday = new Day("Friday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "How It Works", "Yes"),
]);

let saturday = new Day("Saturday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "Necessary for Life", "Yes"),
]);

let sunday = new Day("Sunday", [
  new Meeting("6:45 AM", FELLOWSHIP_AA, "Came to Believe", "Yes"),
  new Meeting("12:00 PM", FELLOWSHIP_AA, "AA Literature", "Yes"),
]);

function createRowsForDay(day) {
    rows = "";
    $.each(day.list, function(index, meeting) {
    rows +=  `
        <tr class="${meeting.fellowShip} ${day.name}">
            <td>${day.name.substr(0,3)}</td>
            <td>${meeting.time}</td>
            <td>${meeting.fellowShip}</td>
            <td>${meeting.format}</td>
            <td>${meeting.isClosed}</td>
        </tr>
        `
    });

   return rows;
}

//     https://learn.jquery.com/using-jquery-core/document-ready/
$(document).ready(function(){

  //      https://materializecss.com/dropdown.html  
  M.AutoInit();
  $('.sidenav').sidenav();
  
  // the point of this is to use the "active" class to determine what needs to be displayed. the table header has two dropdowns. when a dropdown item is selected, 
  // it is marked as active, and the text in that dropdown is compared to  the table rows. if a table row has a matching class, it gets displayed. 
  $("ul.dropdown-content li").on("click",function() {
    let parent = $(this).parent();
    let children = parent.children();
    $.each(children, function(index, child) {
      $(this).removeClass("active");
    });

    $(this).toggleClass("active");
    
    let day = $("#dd_day");
    let fellowship = $("#dd_fellowship");
    let table = $("#meeting-schedule").children();

    let activeDay = "All";
    let activeFellowship = "All";
    $.each(day.children(), (idx, elem) => {
      if ($(elem).hasClass("active")){
        activeDay = $(this).text();
      }
    });

    $.each(fellowship.children(), (idx, elem) => {
      if ($(elem).hasClass("active")){
        activeFellowship = $(this).text();
      }
    });

    // show them all. makes the logic easier
    $.each(table, (idx, elem) => {
      $(elem).show();
    });

    $.each(table, (idx, elem) => {
      if (activeDay != "All" && !$(elem).hasClass(activeDay)) {
        $(elem).hide();
      }

      if (activeFellowship != "All" && !$(elem).hasClass(activeFellowship)) {
        $(elem).hide();
      }
    });
  });

    $("#meeting-schedule").append(createRowsForDay(monday));
    $("#meeting-schedule").append(createRowsForDay(tuesday));
    $("#meeting-schedule").append(createRowsForDay(wednesday));
    $("#meeting-schedule").append(createRowsForDay(thursday));
    $("#meeting-schedule").append(createRowsForDay(friday));
    $("#meeting-schedule").append(createRowsForDay(saturday));
    $("#meeting-schedule").append(createRowsForDay(sunday));
});
    </script>
  </body>
</html>